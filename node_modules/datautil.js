function connectDB(){
  var db;
  if(localStorage.db === null){
    db = openDatabase('f:\\iLabsData\\localdb', '1.0', 'Local Storage', 2 * 1024 * 1024);

    db.transaction(function (tx) {
      tx.executeSql('CREATE TABLE IF NOT EXISTS user_courses (id unique, course_id, status)');
      tx.executeSql('CREATE TABLE IF NOT EXISTS user (id unique, password)');
      tx.executeSql('CREATE TABLE IF NOT EXISTS user_points (id unique, points)');
      tx.executeSql('INSERT INTO user (id, password) VALUES ("demo", "demo")');
    });

    localStorage.db = true;
  }else{
    db = openDatabase('f:\\iLabsData\\localdb');
  }

  return db;
}

function db_cud_util(sql_array){

  conn = connectDB();
  var query_no = sql_array.length;
  // Create table and insert one line
  conn.transaction(function (tx) {

    for (i = 0; i < query_no; i++){
      tx.executeSql(sql_array[i]);
    }

  });
}

function db_retrieve_util(txtsql){

  conn = connectDB();

  // Query out the data
  conn.transaction(function (tx) {
    tx.executeSql(txtsql, [], function (tx, results) {
      /*var len = results.rows.length, i;
      for (i = 0; i < len; i++) {
        alert(results.rows.item(i).text);
      }*/
      return results;
    });
  });

}

exports.connectDB = connectDB;
