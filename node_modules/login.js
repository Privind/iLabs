var jade = require('jade');
var datautil = require('datautil');

var __viewdir = "./views/";

function init_app() {

  if(sessionStorage.getItem("user") === null){

    $('#content').append(jade.renderFile(__viewdir + './userlogin.jade'));

    var form = document.getElementById('login-form');
    if (form.attachEvent) {
      form.attachEvent("submit", processForm);
    } else {
      form.addEventListener("submit", processForm);
    }

  }else{

    $('#content').append(course.render());

  }
}

function loginuser(username, password) {

  conn = datautil.connectDB();

  conn.executeSql("SELECT COUNT(1) AS count FROM user WHERE id = ? AND password = ?", [username, password], function (tx, results)
                 {
                   if(results.rows.item(0).count > 0){
                     return true;
                   }

                   return false;

                 });

}

exports.render = render;
exports.loginuser = loginuser;
